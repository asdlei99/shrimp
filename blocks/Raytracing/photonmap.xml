<shrimp type="function" name="PhotonMap" description="Photon map lookup" author="rconstruct">
	<input name="pmap" description="Photon map filename" storage="uniform" type="string" default="&quot;&quot;"/>
	<input name="NN" description="Normal vector" type="normal" default="normalize(N)"/>
	<input name="PP" description="Surface point" type="point" default="P"/>
	<input name="ltype" description="Lookup type" storage="uniform" type="string" default="&quot;irradiance&quot;"/>
	<input name="estim" description="Number of photons" type="float" default="50"/>
	<input name="mindepth" description="Number of photon bounces" type="float" default="1"/>
	<output name="val" description="Output value" type="color"/>
	<rsl_code>
	#if RENDERER==_3delight
		$(val) = photonmap( $(pmap), $(PP), $(NN), "lookuptype", $(ltype),
							"estimator", $(estim), "mindepth", $(mindepth) );
		
	#elif RENDERER==aqsis
		$(val) = 0;
		
	#else
		$(val) = photonmap( $(pmap), $(PP), $(NN), "lookuptype", "irradiance",
							"estimator", $(estim) );
	#endif
	</rsl_code>
	<usage>Performs a photon map lookup of a surface point P with a surface normal N. Lookup type can be irradiance, or radiance, in which case the lookup is performed before the BRDF calculation, and after the BRDF calculation respectively. Estimator specifies the number of photons used, and mindepth the depth at which to consider the photons. This varies with renderer implementation, check your renderer documentation for more details.</usage>
</shrimp>
