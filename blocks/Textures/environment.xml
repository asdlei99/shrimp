<shrimp type="function" name="Environment" description="Access a environment map" author="rconstruct">
	<input name="texname" description="Texture map name" type="string" default="&quot;&quot;"/>
	<input name="dir" description="Direction vector" type="vector normal" default="0"/>
    <input name="blur" description="Texture blur" type="float" default="0"/>
    <input name="sblur" description="Blur along S" type="float" default="0"/>
    <input name="tblur" description="Blur along T" type="float" default="0"/>
    <input name="width" description="Blur filter width" type="float" default="0"/>
    <input name="swidth" description="Blur filter width along S" type="float" default="0"/>
    <input name="twidth" description="Blur filter width along T" type="float" default="0"/>
	<input name="samples" description="SSampling rate" type="float" default="4"/>
    <input name="fill" description="Fill value on empty channel" type="float" default="0"/>
    <input name="filter" description="Filter type" type="string" default="&quot;gaussian&quot;"/>
    <input name="channel" description="Channel, in color textures" type="float" default="0"/>
	<output name="val" description="Output color" type="color float"/>
	<code>
	#define $(val)_$(val:type)
    #ifdef $(val)_float
        $(val) = $(val:type) environment( $(texname), $(dir),
								"blur", $(blur),
								"sblur", $(sblur),
								"tblur", $(tblur),
								"width", $(width),
								"swidth", $(swidth),
								"twidth", $(twidth),
								"samples", $(samples),
                                "filter", $(filter),
								"fill", $(fill) ) ;
    #else
        $(val) = color environment( $(texname)[$(channel)], $(dir),
								"blur", $(blur),
								"sblur", $(sblur),
								"tblur", $(tblur),
								"width", $(width),
								"swidth", $(swidth),
								"twidth", $(twidth),
								"samples", $(samples),
                                "filter", $(filter),
								"fill", $(fill) ) ;
    #endif
	</code>
</shrimp>
